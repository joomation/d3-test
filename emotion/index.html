<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>emotion</title>
    <script src="https://d3js.org/d3.v4.min.js"></script>

</head>

<body>
    <button onclick="scale()">스케일</button>
    <svg width="960" height="500"></svg>
    <script>
        var svg = d3.select("svg"),
            width = +svg.attr("width"),
            height = +svg.attr("height"),
            angles = d3.range(0, 2 * Math.PI, Math.PI / 100);

        var path = svg.append("g")
            .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")")
            .attr("fill", "none")
            .attr("stroke-width", 2)
            .attr("stroke-linejoin", "round")
            .selectAll("path")
            .data(["#2196F3", "#00BCD4", "#3F51B5", "#9C27B0"])
            .enter().append("path")
            .attr("stroke", function (d) {
                return d;
            })
            .style("mix-blend-mode", "difference")
            .datum(function (d, i) {
                return d3.radialLine()
                    .curve(d3.curveLinearClosed)
                    .angle(function (a) {
                        return a;
                    })
                    .radius(function (a) {
                        var t = d3.now() / 1000;
                        return 200 + Math.cos(a * 5 - i * 1 * Math.PI / 4 + t) * Math.pow((1 + Math.cos(a - t)) /
                            2, 4) * 20;
                    });
            });
        var path2 = svg.append("g")
            .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")")
            .append("g")
            .attr("transform", "rotate(120)")
            .attr("fill", "none")
            .attr("stroke-width", 1.5)
            .attr("stroke-linejoin", "round")
            .selectAll("path")
            .data(["#2196F3", "#00BCD4", "#3F51B5", "#9C27B0"])
            .enter().append("path")
            .attr("stroke", function (d, i) {
                return d;
            })
            .attr("opacity", function (d, i) {
                return 1 - (i * 0.25)
            })
            .style("mix-blend-mode", "multiply")
            .datum(function (d, i) {
                return d3.radialLine()
                    .curve(d3.curveLinearClosed)
                    .angle(function (a) {
                        return a;
                    })
                    .radius(function (a) {
                        var t = d3.now() / 1000;
                        return 200 + Math.cos(a * 5 - i * 1 * Math.PI / 4 + t) * Math.pow((1 + Math.cos(a - t)) /
                            2, 4) * 10;
                    });
            })
            .attr("d",function(d){

                return d(angles);
            })
        // d3.timer(function () {
        //     path.attr("d", function (d) {
        //         return d(angles);
        //     });
        // });
        function scale() {
            timer.restart(function(){
                console.log('adf')
            })
            // path2.datum(function (d, i) {
            //         return d3.radialLine()
            //             .curve(d3.curveLinearClosed)
            //             .angle(function (a) {
            //                 return a;
            //             })
            //             .radius(function (a) {
            //                 var t = d3.now() / 1000;
            //                 return 200 + Math.cos(a * 5 - i * 1 * Math.PI / 4 + t) * Math.pow((1 + Math.cos(a - t)) /
            //                     2, 4) * 100;
            //             });
            //     })
            //     .transition().duration(500)
            // .attr("d", function (d) {
            //     return d(angles);
            // })
            // .on('end',start)

        }

        
        var timer= d3.timer(function () {
            path2.attr("d", function (d) {
                return d(angles);
            });
        });
    


//         var easing = [
//     "easeElastic",
//     "easeBounce",
//     "easeLinear",
//     "easeSin",
//     "easeQuad",
//     "easeCubic",
//     "easePoly",
//     "easeCircle",
//     "easeExp",
//     "easeBack"
//     ];

// var svg = d3.select("body")
//         .append("svg")
//         .attr("width", 960)
//         .attr("height", 500);

// function circleTransition(easement,yPos){ 

//     var timeCircle = svg.append("circle")
//         .attr("fill", "steelblue")
//         .attr("r", 20);
//     repeat();
    
//     function repeat() {
//       timeCircle
//         .attr('cx', 210)          // position the circle at 40 on the x axis
//         .attr('cy', (yPos*45)+25) // position the circle at 250 on the y axis
//         .transition()             // apply a transition
//         .ease(easement)           // control the speed of the transition
//         .duration(4000)           // apply it over 2000 milliseconds
//         .attr('cx', 720)          // move the circle to 920 on the x axis
//         .transition()             // apply a transition
//         .ease(easement)           // control the speed of the transition
//         .duration(4000)           // apply it over 2000 milliseconds
//         .attr('cx', 210)          // return the circle to 40 on the x axis
//         .on("end", repeat);       // when the transition finishes start again
//     };

//     var easeType = svg.append("text")
//         .attr("dy", ".35em") // set offset y position
//         .attr("x", 475)
//       .attr("text-anchor", "middle") // set anchor x justification
//         .attr("y", (yPos*45)+25)
//         .text(easing[yPos]);
// };

// circleTransition(d3.easeElastic,0);


    </script>
</body>

</html>